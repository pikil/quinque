import{s as se,e as A,c as I,b as G,f as p,m as D,i as K,L as ce,O as Ge,k as re,a0 as Pe,y as yt,q as Se,a as H,g as X,h as y,n as he,o as ye,H as ae,I as fe,t as me,d as be,l as Be,z as Te,A as ze,B as qe,C as Fe,K as Oe,a1 as Vt,E as Rt,w as Ut,a2 as Yt,a3 as nt,j as Bt,u as Jt,a4 as ge}from"../chunks/scheduler.sr03XYK9.js";import{S as le,i as ne,t as k,g as x,d as S,b as ee,c as T,a as z,m as q,e as F,f as Ve,h as Qt}from"../chunks/index.89F2R9E_.js";import{I as _e,e as oe,B as ue}from"../chunks/Button.wuO5qU-p.js";import{e as O,t as it,f as rt,s as ot,q as $t}from"../chunks/objects.MVOqMiSL.js";import{c as xt,g as es,f as ts,e as ss,d as ls,b as ns,a as is}from"../chunks/custom-icons.SKl5Bn_o.js";import{w as He,o as rs,g as os}from"../chunks/entry.AhPIhmLa.js";import{a as as,f as fs,b as At}from"../chunks/fontawesome6-icons.UI3iMAPS.js";import{c as cs,d as at,a as us}from"../chunks/bootstrap-icons.p0hXF6yK.js";import{p as gs}from"../chunks/stores.uGL2e7q2.js";const Me=()=>Math.floor(Math.random()*Object.keys(O).length),ds=l=>!l||!(l%2),De=l=>{switch(l){case O.AXES:return is;case O.DIAGONAL:return ns;case O.RISING:return ls;case O.FALLING:return ss;case O.HORIZONTAL:return ts;case O.VERTICAL:return es;default:return xt}},Re=(l,e,s,t)=>{if(l[e]===void 0||l[e][s]===void 0)return 0;let n=5;const i=e-1,r=e+1;return(l[i]&&l[i][s]===t||l[r]&&l[r][s]===t)&&n--,(l[e][s+1]===t||l[e][s-1]===t)&&n--,n},ke=He(O.SINGLE),pe=He(O.SINGLE),Ee=He(O.SINGLE);function ft(l){let e,s,t,n;const i=[ms,hs],r=[];function a(o,f){return o[2]?0:o[1]?1:-1}return~(e=a(l))&&(s=r[e]=i[e](l)),{c(){s&&s.c(),t=Se()},l(o){s&&s.l(o),t=Se()},m(o,f){~e&&r[e].m(o,f),K(o,t,f),n=!0},p(o,f){let c=e;e=a(o),e===c?~e&&r[e].p(o,f):(s&&(x(),S(r[c],1,1,()=>{r[c]=null}),ee()),~e?(s=r[e],s?s.p(o,f):(s=r[e]=i[e](o),s.c()),k(s,1),s.m(t.parentNode,t)):s=null)},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&p(t),~e&&r[e].d(o)}}}function hs(l){let e,s;return e=new _e({props:{name:as,class:l[5]}}),{c(){T(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,n){q(e,t,n),s=!0},p(t,n){const i={};n&32&&(i.class=t[5]),e.$set(i)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function ms(l){let e,s;return e=new _e({props:{name:l[3],class:"h-4 w-4 text-black"}}),{c(){T(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,n){q(e,t,n),s=!0},p(t,n){const i={};n&8&&(i.name=t[3]),e.$set(i)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function bs(l){let e,s,t,n,i=!l[0]&&ft(l);return{c(){e=A("div"),i&&i.c(),this.h()},l(r){e=I(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=G(e);i&&i.l(a),a.forEach(p),this.h()},h(){D(e,"role","button"),D(e,"tabindex","0"),D(e,"class",l[4])},m(r,a){K(r,e,a),i&&i.m(e,null),s=!0,t||(n=[ce(e,"pointerdown",l[6]),ce(e,"mouseenter",l[7]),ce(e,"mouseleave",l[8])],t=!0)},p(r,[a]){r[0]?i&&(x(),S(i,1,1,()=>{i=null}),ee()):i?(i.p(r,a),a&1&&k(i,1)):(i=ft(r),i.c(),k(i,1),i.m(e,null)),(!s||a&16)&&D(e,"class",r[4])},i(r){s||(k(i),s=!0)},o(r){S(i),s=!1},d(r){r&&p(e),i&&i.d(),t=!1,Ge(n)}}}function _s(l,e,s){let t,n,i,r,a,o,f;re(l,ke,C=>s(17,f=C));const c=Pe();let m=!1,{hoverCoords:w=null}=e,{disabled:v=!1}=e,{rowIndex:V}=e,{colIndex:L}=e,{selected:b=!1}=e,{selectCandidate:u=!1}=e,{hoverColor:g=""}=e;const E=()=>{s(14,m=!0),setTimeout(()=>{s(14,m=!1)},600)},P=async()=>{c("click",{rowIndex:V,colIndex:L})},W=()=>{c("enter",{rowIndex:V,colIndex:L})},Z=()=>{c("leave",{rowIndex:V,colIndex:L})};return l.$$set=C=>{"hoverCoords"in C&&s(9,w=C.hoverCoords),"disabled"in C&&s(10,v=C.disabled),"rowIndex"in C&&s(11,V=C.rowIndex),"colIndex"in C&&s(12,L=C.colIndex),"selected"in C&&s(0,b=C.selected),"selectCandidate"in C&&s(1,u=C.selectCandidate),"hoverColor"in C&&s(13,g=C.hoverColor)},l.$$.update=()=>{l.$$.dirty&2&&s(5,t="h-3 w-3 opacity-50"+(u==="color1"?" text-indigo-400":" text-rose-400")),l.$$.dirty&1&&s(15,n=b==="color1"?" bg-indigo-400 sel-color1":b==="color2"?" bg-pink-400 sel-color2":" bg-gray-600"),l.$$.dirty&8193&&s(16,i=b?"":g==="color1"?" hover:bg-indigo-400":g==="color2"?" hover:bg-rose-400":" hover:bg-gray-400"),l.$$.dirty&115713&&s(4,r="flex-1 aspect-square text-sm transition-colors duration-300 rounded-md border border-gray-600 bubbly relative cursor-pointer outline-none flex flex-col justify-center items-center bg-opacity-80 hover:bg-opacity-100"+i+n+(b||v?" pointer-events-none":"")+(m?" animate":"")),l.$$.dirty&131072&&s(3,a=De(f)),l.$$.dirty&6656&&s(2,o=w&&V===w[0]&&L===w[1]),l.$$.dirty&1&&b&&yt().then(E)},[b,u,o,a,r,t,P,W,Z,w,v,V,L,g,m,n,i,f]}class ks extends le{constructor(e){super(),ne(this,e,_s,bs,se,{hoverCoords:9,disabled:10,rowIndex:11,colIndex:12,selected:0,selectCandidate:1,hoverColor:13})}}function ct(l,e,s){const t=l.slice();return t[7]=e[s],t[9]=s,t}function ut(l,e,s){const t=l.slice();return t[7]=e[s],t[9]=s,t}function gt(l){let e,s;return{c(){e=A("div"),s=me(l[9]),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0});var n=G(e);s=be(n,l[9]),n.forEach(p),this.h()},h(){D(e,"class",It),D(e,"style",l[2])},m(t,n){K(t,e,n),y(e,s)},p(t,n){n&4&&D(e,"style",t[2])},d(t){t&&p(e)}}}function dt(l){let e,s;return{c(){e=A("div"),s=me(l[9]),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0});var n=G(e);s=be(n,l[9]),n.forEach(p),this.h()},h(){D(e,"class",It),D(e,"style",l[2])},m(t,n){K(t,e,n),y(e,s)},p(t,n){n&4&&D(e,"style",t[2])},d(t){t&&p(e)}}}function Cs(l){let e,s,t,n=oe({length:10}),i=[];for(let o=0;o<n.length;o+=1)i[o]=gt(ut(l,n,o));let r=oe({length:10}),a=[];for(let o=0;o<r.length;o+=1)a[o]=dt(ct(l,r,o));return{c(){e=A("div"),s=A("div");for(let o=0;o<i.length;o+=1)i[o].c();t=H();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0,style:!0});var f=G(e);s=I(f,"DIV",{class:!0,style:!0});var c=G(s);for(let m=0;m<i.length;m+=1)i[m].l(c);t=X(c);for(let m=0;m<a.length;m+=1)a[m].l(c);c.forEach(p),f.forEach(p),this.h()},h(){D(s,"class","transition-transform duration-500"),D(s,"style",l[0]),D(e,"class",l[1]),D(e,"style",l[2])},m(o,f){K(o,e,f),y(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null);y(s,t);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(s,null)},p(o,[f]){if(f&4){n=oe({length:10});let c;for(c=0;c<n.length;c+=1){const m=ut(o,n,c);i[c]?i[c].p(m,f):(i[c]=gt(m),i[c].c(),i[c].m(s,t))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}if(f&4){r=oe({length:10});let c;for(c=0;c<r.length;c+=1){const m=ct(o,r,c);a[c]?a[c].p(m,f):(a[c]=dt(m),a[c].c(),a[c].m(s,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=r.length}f&1&&D(s,"style",o[0]),f&2&&D(e,"class",o[1]),f&4&&D(e,"style",o[2])},i:he,o:he,d(o){o&&p(e),ye(i,o),ye(a,o)}}}const It="flex flex-col justify-center items-center text-xl";function vs(l,e,s){let t,n,i,{digit:r=0}=e,{height:a=30}=e,{width:o=15}=e;return l.$$set=f=>{s(6,e=ae(ae({},e),fe(f))),"digit"in f&&s(3,r=f.digit),"height"in f&&s(4,a=f.height),"width"in f&&s(5,o=f.width)},l.$$.update=()=>{l.$$.dirty&48&&s(2,t="width: "+o+"px;height: "+a+"px"),s(1,n="overflow-hidden"+(e.class?" "+e.class:"")),l.$$.dirty&24&&s(0,i="transform: translateY(-"+r*a+"px)")},e=fe(e),[i,n,t,r,a,o]}class de extends le{constructor(e){super(),ne(this,e,vs,Cs,se,{digit:3,height:4,width:5})}}function ws(l){let e,s,t,n,i,r,a,o,f="-",c,m,w,v,V,L,b;return s=new de({props:{digit:l[3][0],class:l[0]}}),n=new de({props:{digit:l[3][1],class:l[0]}}),r=new de({props:{digit:l[3][2],class:l[0]}}),m=new de({props:{digit:l[2][0],class:l[1]}}),v=new de({props:{digit:l[2][1],class:l[1]}}),L=new de({props:{digit:l[2][2],class:l[1]}}),{c(){e=A("div"),T(s.$$.fragment),t=H(),T(n.$$.fragment),i=H(),T(r.$$.fragment),a=H(),o=A("div"),o.textContent=f,c=H(),T(m.$$.fragment),w=H(),T(v.$$.fragment),V=H(),T(L.$$.fragment),this.h()},l(u){e=I(u,"DIV",{class:!0});var g=G(e);z(s.$$.fragment,g),t=X(g),z(n.$$.fragment,g),i=X(g),z(r.$$.fragment,g),a=X(g),o=I(g,"DIV",{class:!0,"data-svelte-h":!0}),Be(o)!=="svelte-1r1kxhl"&&(o.textContent=f),c=X(g),z(m.$$.fragment,g),w=X(g),z(v.$$.fragment,g),V=X(g),z(L.$$.fragment,g),g.forEach(p),this.h()},h(){D(o,"class","text-faded px-2"),D(e,"class","flex flex-row items-center justify-center py-2")},m(u,g){K(u,e,g),q(s,e,null),y(e,t),q(n,e,null),y(e,i),q(r,e,null),y(e,a),y(e,o),y(e,c),q(m,e,null),y(e,w),q(v,e,null),y(e,V),q(L,e,null),b=!0},p(u,[g]){const E={};g&8&&(E.digit=u[3][0]),g&1&&(E.class=u[0]),s.$set(E);const P={};g&8&&(P.digit=u[3][1]),g&1&&(P.class=u[0]),n.$set(P);const W={};g&8&&(W.digit=u[3][2]),g&1&&(W.class=u[0]),r.$set(W);const Z={};g&4&&(Z.digit=u[2][0]),g&2&&(Z.class=u[1]),m.$set(Z);const C={};g&4&&(C.digit=u[2][1]),g&2&&(C.class=u[1]),v.$set(C);const Q={};g&4&&(Q.digit=u[2][2]),g&2&&(Q.class=u[1]),L.$set(Q)},i(u){b||(k(s.$$.fragment,u),k(n.$$.fragment,u),k(r.$$.fragment,u),k(m.$$.fragment,u),k(v.$$.fragment,u),k(L.$$.fragment,u),b=!0)},o(u){S(s.$$.fragment,u),S(n.$$.fragment,u),S(r.$$.fragment,u),S(m.$$.fragment,u),S(v.$$.fragment,u),S(L.$$.fragment,u),b=!1},d(u){u&&p(e),F(s),F(n),F(r),F(m),F(v),F(L)}}}function Ds(l,e,s){let t,n,{score1:i=0}=e,{score2:r=0}=e,{score1Class:a=""}=e,{score2Class:o=""}=e;const f=c=>{if(c<=0)return[0,0,0];if(c>=1e3)return[9,9,9];const m=c%10;c=c/10|0;const w=c%10;return c=c/10|0,[c%10,w,m]};return l.$$set=c=>{"score1"in c&&s(4,i=c.score1),"score2"in c&&s(5,r=c.score2),"score1Class"in c&&s(0,a=c.score1Class),"score2Class"in c&&s(1,o=c.score2Class)},l.$$.update=()=>{l.$$.dirty&16&&s(3,t=f(i)),l.$$.dirty&32&&s(2,n=f(r))},[a,o,n,t,i,r]}class Mt extends le{constructor(e){super(),ne(this,e,Ds,ws,se,{score1:4,score2:5,score1Class:0,score2Class:1})}}function ps(l){let e;const s=l[12].default,t=Te(s,l,l[14],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&16384)&&ze(t,s,n,n[14],e?Fe(s,n[14],i,null):qe(n[14]),null)},i(n){e||(k(t,n),e=!0)},o(n){S(t,n),e=!1},d(n){t&&t.d(n)}}}function Es(l){let e,s;return e=new ue({props:{class:l[11],type:l[0],label:l[1],href:l[2],title:l[9],icon:l[3],iconClass:l[5],iconRight:l[4],dense:l[6],disabled:l[7],loading:l[8],target:l[10],$$slots:{default:[ps]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){T(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,n){q(e,t,n),s=!0},p(t,[n]){const i={};n&2048&&(i.class=t[11]),n&1&&(i.type=t[0]),n&2&&(i.label=t[1]),n&4&&(i.href=t[2]),n&512&&(i.title=t[9]),n&8&&(i.icon=t[3]),n&32&&(i.iconClass=t[5]),n&16&&(i.iconRight=t[4]),n&64&&(i.dense=t[6]),n&128&&(i.disabled=t[7]),n&256&&(i.loading=t[8]),n&1024&&(i.target=t[10]),n&16384&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function Ls(l,e,s){let t,{$$slots:n={},$$scope:i}=e,{type:r=void 0}=e,{label:a=void 0}=e,{href:o=void 0}=e,{icon:f=void 0}=e,{iconRight:c=void 0}=e,{iconClass:m=void 0}=e,{dense:w=void 0}=e,{disabled:v=void 0}=e,{loading:V=void 0}=e,{title:L=void 0}=e,{target:b=void 0}=e;function u(g){Oe.call(this,l,g)}return l.$$set=g=>{s(15,e=ae(ae({},e),fe(g))),"type"in g&&s(0,r=g.type),"label"in g&&s(1,a=g.label),"href"in g&&s(2,o=g.href),"icon"in g&&s(3,f=g.icon),"iconRight"in g&&s(4,c=g.iconRight),"iconClass"in g&&s(5,m=g.iconClass),"dense"in g&&s(6,w=g.dense),"disabled"in g&&s(7,v=g.disabled),"loading"in g&&s(8,V=g.loading),"title"in g&&s(9,L=g.title),"target"in g&&s(10,b=g.target),"$$scope"in g&&s(14,i=g.$$scope)},l.$$.update=()=>{s(11,t=" bg-primary text-white"+(e.class?" "+e.class:""))},e=fe(e),[r,a,o,f,c,m,w,v,V,L,b,t,n,u,i]}class Ss extends le{constructor(e){super(),ne(this,e,Ls,Es,se,{type:0,label:1,href:2,icon:3,iconRight:4,iconClass:5,dense:6,disabled:7,loading:8,title:9,target:10})}}const Nt=["overflow-hidden","scroll-blocked"],ys=()=>{document.body.classList.add(...Nt),document.documentElement.classList.add("overflow-hidden")},Vs=()=>{document.body.classList.remove(...Nt),document.documentElement.classList.remove("overflow-hidden")},Ne={},Rs=l=>(Ne[l]||(Ne[l]=document.getElementById(l)),Ne[l]),Ot=(l,e="modal")=>{const s=Rs(e);s&&(s.appendChild(l),s.focus())};function ht(l){let e,s,t,n,i;return{c(){e=A("div"),this.h()},l(r){e=I(r,"DIV",{role:!0,tabindex:!0,class:!0}),G(e).forEach(p),this.h()},h(){D(e,"role","button"),D(e,"tabindex","0"),D(e,"class","fixed z-[35] inset-0 backdrop-brightness-75 backdrop-blur")},m(r,a){K(r,e,a),t=!0,n||(i=[Vt(Ot.call(null,e,"backdrop")),ce(e,"click",l[1]),ce(e,"keypress",l[2])],n=!0)},i(r){t||(Rt(()=>{t&&(s||(s=Ve(e,rt,it,!0)),s.run(1))}),t=!0)},o(r){s||(s=Ve(e,rt,it,!1)),s.run(0),t=!1},d(r){r&&p(e),r&&s&&s.end(),n=!1,Ge(i)}}}function Bs(l){let e,s,t=l[0]&&ht(l);return{c(){t&&t.c(),e=Se()},l(n){t&&t.l(n),e=Se()},m(n,i){t&&t.m(n,i),K(n,e,i),s=!0},p(n,[i]){n[0]?t?i&1&&k(t,1):(t=ht(n),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(x(),S(t,1,1,()=>{t=null}),ee())},i(n){s||(k(t),s=!0)},o(n){S(t),s=!1},d(n){n&&p(e),t&&t.d(n)}}}function As(l,e,s){let{showing:t=!1}=e;function n(r){Oe.call(this,l,r)}function i(r){Oe.call(this,l,r)}return l.$$set=r=>{"showing"in r&&s(0,t=r.showing)},[t,n,i]}class Is extends le{constructor(e){super(),ne(this,e,As,Bs,se,{showing:0})}}function mt(l){let e;const s=l[4].default,t=Te(s,l,l[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&8)&&ze(t,s,n,n[3],e?Fe(s,n[3],i,null):qe(n[3]),null)},i(n){e||(k(t,n),e=!0)},o(n){S(t,n),e=!1},d(n){t&&t.d(n)}}}function Ms(l){let e,s,t,n=l[0]&&mt(l);return s=new Is({props:{showing:l[0]}}),s.$on("click",l[1]),s.$on("keypress",l[1]),{c(){n&&n.c(),e=H(),T(s.$$.fragment)},l(i){n&&n.l(i),e=X(i),z(s.$$.fragment,i)},m(i,r){n&&n.m(i,r),K(i,e,r),q(s,i,r),t=!0},p(i,[r]){i[0]?n?(n.p(i,r),r&1&&k(n,1)):(n=mt(i),n.c(),k(n,1),n.m(e.parentNode,e)):n&&(x(),S(n,1,1,()=>{n=null}),ee());const a={};r&1&&(a.showing=i[0]),s.$set(a)},i(i){t||(k(n),k(s.$$.fragment,i),t=!0)},o(i){S(n),S(s.$$.fragment,i),t=!1},d(i){i&&p(e),n&&n.d(i),F(s,i)}}}function Ns(l,e,s){let{$$slots:t={},$$scope:n}=e;const i=Pe();let{showing:r=!1}=e,{disabled:a=!1}=e;const o=()=>{i("dismiss")};return rs(()=>{s(0,r=!1)}),l.$$set=f=>{"showing"in f&&s(0,r=f.showing),"disabled"in f&&s(2,a=f.disabled),"$$scope"in f&&s(3,n=f.$$scope)},l.$$.update=()=>{if(l.$$.dirty&5){const f=c=>{var w;if(["input","textarea"].indexOf((w=c.target)==null?void 0:w.type)>=0)return;let m=!1;switch(c.key){case"Escape":o(),m=!0;break;case"Enter":a||i("ok"),m=!0;break}m&&(c.preventDefault(),c.stopPropagation())};r?(document.addEventListener("keydown",f),ys()):(document.removeEventListener("keydown",f),Vs())}},[r,o,a,n,t]}class Os extends le{constructor(e){super(),ne(this,e,Ns,Ms,se,{showing:0,disabled:2})}}function bt(l){let e,s,t,n,i,r;return i=new ue({props:{round:!0,icon:cs,iconClass:"h-6 w-6 text-faded"}}),i.$on("click",l[11]),{c(){e=A("div"),s=A("div"),t=me(l[1]),n=H(),T(i.$$.fragment),this.h()},l(a){e=I(a,"DIV",{id:!0,class:!0});var o=G(e);s=I(o,"DIV",{class:!0});var f=G(s);t=be(f,l[1]),f.forEach(p),n=X(o),z(i.$$.fragment,o),o.forEach(p),this.h()},h(){D(s,"class","flex-grow min-w-0 ellipsis text-gray-300 select-none"),D(e,"id","modal-title"),D(e,"class","flex flex-row gap-3 items-center pl-4 pr-2 pb-3")},m(a,o){K(a,e,o),y(e,s),y(s,t),y(e,n),q(i,e,null),r=!0},p(a,o){(!r||o&2)&&Bt(t,a[1])},i(a){r||(k(i.$$.fragment,a),r=!0)},o(a){S(i.$$.fragment,a),r=!1},d(a){a&&p(e),F(i)}}}function _t(l){let e,s,t,n=!l[7]&&kt(l),i=!l[6]&&Ct(l);return{c(){e=A("div"),n&&n.c(),s=H(),i&&i.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var a=G(e);n&&n.l(a),s=X(a),i&&i.l(a),a.forEach(p),this.h()},h(){D(e,"class","flex flex-col-reverse gap-3 bg-gray-700 p-3 sm:flex-row")},m(r,a){K(r,e,a),n&&n.m(e,null),y(e,s),i&&i.m(e,null),t=!0},p(r,a){r[7]?n&&(x(),S(n,1,1,()=>{n=null}),ee()):n?(n.p(r,a),a&128&&k(n,1)):(n=kt(r),n.c(),k(n,1),n.m(e,s)),r[6]?i&&(x(),S(i,1,1,()=>{i=null}),ee()):i?(i.p(r,a),a&64&&k(i,1)):(i=Ct(r),i.c(),k(i,1),i.m(e,null))},i(r){t||(k(n),k(i),t=!0)},o(r){S(n),S(i),t=!1},d(r){r&&p(e),n&&n.d(),i&&i.d()}}}function kt(l){let e,s;return e=new ue({props:{label:l[3],class:"w-full text-faded",disabled:l[5]}}),e.$on("click",l[11]),{c(){T(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,n){q(e,t,n),s=!0},p(t,n){const i={};n&8&&(i.label=t[3]),n&32&&(i.disabled=t[5]),e.$set(i)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function Ct(l){let e,s;return e=new Ss({props:{label:l[2],class:"w-full",disabled:l[4],loading:l[5]}}),e.$on("click",l[10]),{c(){T(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,n){q(e,t,n),s=!0},p(t,n){const i={};n&4&&(i.label=t[2]),n&16&&(i.disabled=t[4]),n&32&&(i.loading=t[5]),e.$set(i)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function Gs(l){let e,s,t,n,i,r,a,o,f,c,m,w,v=l[1]&&bt(l);const V=l[12].default,L=Te(V,l,l[14],null);let b=(!l[6]||!l[7])&&_t(l);return{c(){e=A("div"),s=A("div"),t=A("div"),n=A("div"),i=A("div"),v&&v.c(),r=H(),a=A("div"),L&&L.c(),o=H(),b&&b.c(),this.h()},l(u){e=I(u,"DIV",{class:!0,"aria-labelledby":!0,role:!0,"aria-modal":!0});var g=G(e);s=I(g,"DIV",{class:!0});var E=G(s);t=I(E,"DIV",{role:!0,tabindex:!0,class:!0});var P=G(t);n=I(P,"DIV",{class:!0});var W=G(n);i=I(W,"DIV",{class:!0});var Z=G(i);v&&v.l(Z),r=X(Z),a=I(Z,"DIV",{class:!0});var C=G(a);L&&L.l(C),C.forEach(p),Z.forEach(p),o=X(W),b&&b.l(W),W.forEach(p),P.forEach(p),E.forEach(p),g.forEach(p),this.h()},h(){D(a,"class","px-4"),D(i,"class","bg-gray-600 py-4"),D(n,"class","relative transform overflow-hidden rounded-lg shadow-lg shadow-gray-800 text-white text-left sm:my-8 w-content sm:max-w-lg"),D(t,"role","button"),D(t,"tabindex","0"),D(t,"class","flex min-h-full justify-center p-4 text-center items-center md:p-0"),D(s,"class","fixed inset-0 z-10 overflow-y-auto"),D(e,"class",l[8]),D(e,"aria-labelledby","modal-title"),D(e,"role","dialog"),D(e,"aria-modal","true")},m(u,g){K(u,e,g),y(e,s),y(s,t),y(t,n),y(n,i),v&&v.m(i,null),y(i,r),y(i,a),L&&L.m(a,null),y(n,o),b&&b.m(n,null),c=!0,m||(w=[ce(t,"click",nt(l[11])),ce(t,"keypress",nt(l[11])),Vt(Ot.call(null,e))],m=!0)},p(u,g){l=u,l[1]?v?(v.p(l,g),g&2&&k(v,1)):(v=bt(l),v.c(),k(v,1),v.m(i,r)):v&&(x(),S(v,1,1,()=>{v=null}),ee()),L&&L.p&&(!c||g&16384)&&ze(L,V,l,l[14],c?Fe(V,l[14],g,null):qe(l[14]),null),!l[6]||!l[7]?b?(b.p(l,g),g&192&&k(b,1)):(b=_t(l),b.c(),k(b,1),b.m(n,null)):b&&(x(),S(b,1,1,()=>{b=null}),ee()),(!c||g&256)&&D(e,"class",l[8])},i(u){c||(k(v),k(L,u),k(b),Rt(()=>{c&&(f||(f=Ve(s,ot,l[9],!0)),f.run(1))}),c=!0)},o(u){S(v),S(L,u),S(b),f||(f=Ve(s,ot,l[9],!1)),f.run(0),c=!1},d(u){u&&p(e),v&&v.d(),L&&L.d(u),b&&b.d(),u&&f&&f.end(),m=!1,Ge(w)}}}function Ps(l){let e,s,t;function n(r){l[13](r)}let i={disabled:l[4],$$slots:{default:[Gs]},$$scope:{ctx:l}};return l[0]!==void 0&&(i.showing=l[0]),e=new Os({props:i}),Ut.push(()=>Qt(e,"showing",n)),e.$on("ok",l[10]),e.$on("dismiss",l[11]),{c(){T(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){q(e,r,a),t=!0},p(r,[a]){const o={};a&16&&(o.disabled=r[4]),a&16894&&(o.$$scope={dirty:a,ctx:r}),!s&&a&1&&(s=!0,o.showing=r[0],Yt(()=>s=!1)),e.$set(o)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function Ts(l,e,s){let t,{$$slots:n={},$$scope:i}=e;const r=Pe(),a={duration:200,easing:$t};let{showing:o=!1}=e,{title:f=""}=e,{okLabel:c="OK"}=e,{dismissLabel:m="Back"}=e,{disabled:w=!1}=e,{loading:v=!1}=e,{hideOk:V=!1}=e,{hideCancel:L=!1}=e;const b=()=>{r("ok")},u=()=>{r("dismiss")};function g(E){o=E,s(0,o)}return l.$$set=E=>{s(16,e=ae(ae({},e),fe(E))),"showing"in E&&s(0,o=E.showing),"title"in E&&s(1,f=E.title),"okLabel"in E&&s(2,c=E.okLabel),"dismissLabel"in E&&s(3,m=E.dismissLabel),"disabled"in E&&s(4,w=E.disabled),"loading"in E&&s(5,v=E.loading),"hideOk"in E&&s(6,V=E.hideOk),"hideCancel"in E&&s(7,L=E.hideCancel),"$$scope"in E&&s(14,i=E.$$scope)},l.$$.update=()=>{s(8,t="relative z-40 p-4"+(e.class?" "+e.class:""))},e=fe(e),[o,f,c,m,w,v,V,L,t,a,b,u,n,g,i]}class vt extends le{constructor(e){super(),ne(this,e,Ts,Ps,se,{showing:0,title:1,okLabel:2,dismissLabel:3,disabled:4,loading:5,hideOk:6,hideCancel:7})}}function zs(l){let e,s,t,n,i,r,a;return s=new _e({props:{name:l[4],class:l[0]}}),n=new _e({props:{name:l[3],class:"h-4 w-4 text-faded"}}),r=new _e({props:{name:l[2],class:"h-4 w-4 text-faded"}}),{c(){e=A("div"),T(s.$$.fragment),t=H(),T(n.$$.fragment),i=H(),T(r.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var f=G(e);z(s.$$.fragment,f),t=X(f),z(n.$$.fragment,f),i=X(f),z(r.$$.fragment,f),f.forEach(p),this.h()},h(){D(e,"class",l[1])},m(o,f){K(o,e,f),q(s,e,null),y(e,t),q(n,e,null),y(e,i),q(r,e,null),a=!0},p(o,[f]){const c={};f&16&&(c.name=o[4]),f&1&&(c.class=o[0]),s.$set(c);const m={};f&8&&(m.name=o[3]),n.$set(m);const w={};f&4&&(w.name=o[2]),r.$set(w),(!a||f&2)&&D(e,"class",o[1])},i(o){a||(k(s.$$.fragment,o),k(n.$$.fragment,o),k(r.$$.fragment,o),a=!0)},o(o){S(s.$$.fragment,o),S(n.$$.fragment,o),S(r.$$.fragment,o),a=!1},d(o){o&&p(e),F(s),F(n),F(r)}}}function qs(l,e,s){let t,n,i,r,a,o,f,c;re(l,Ee,w=>s(6,o=w)),re(l,pe,w=>s(7,f=w)),re(l,ke,w=>s(8,c=w));let{color:m}=e;return l.$$set=w=>{s(9,e=ae(ae({},e),fe(w))),"color"in w&&s(5,m=w.color)},l.$$.update=()=>{l.$$.dirty&256&&s(4,t=De(c)),l.$$.dirty&128&&s(3,n=De(f)),l.$$.dirty&64&&s(2,i=De(o)),s(1,r="flex flex-row items-center justify-center gap-4"+(e.class?" "+e.class:"")),l.$$.dirty&32&&s(0,a="h-4 w-4 "+m)},e=fe(e),[a,r,i,n,t,m,o,f,c]}class Fs extends le{constructor(e){super(),ne(this,e,qs,zs,se,{color:5})}}let Ce=null;const wt=()=>{Ce||(Ce=(window.navigator.userAgent||window.navigator.vendor||window.opera||"").toLowerCase())},Le={},we=(l,e)=>(Le[l]===void 0&&(Le[l]=e()),Le[l]),Hs={ua:null,is:{get webMobile(){return Ce===null&&wt(),we("webmob",()=>/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|kindle|silk|mobile/i.test(Ce||""))},get webDesktop(){return Ce===null&&wt(),we("!webmob",()=>!Le.wm)},get touchAllowed(){return we("touch",()=>"ontouchstart"in window)},get mouseAllowed(){return we("mouse",()=>matchMedia("(pointer:fine)").matches)}}},Dt="color2",Xs=(l,e,s,t)=>{let n=Re(s,l,e,Dt);for(let i=0;i<t.length;i++){const[r,a]=t[i];s[r]&&s[r][a]===!1&&(n+=Re(s,r,a,Dt))}return n};class Ks{constructor(e){this.selections=e,this.thinking=!1}cancelActiveActions(){this.requestId=Date.now()}getBenefitSums(e){const s=[];for(let t=0;t<this.selections.length;t++){const n=this.selections[t];for(let i=0;i<n.length;i++)n[i]||s.push([t,i,Xs(t,i,this.selections,e(t,i))])}return s.sort(([,,t],[,,n])=>n-t),s}selectSingleBlock(){const e=this.getBenefitSums(()=>[]),s=Math.floor(Math.random()*e.length);return[e[s][0],e[s][1]]}selectInAxes(){const e=this.getBenefitSums((s,t)=>[[s-1,t],[s+1,t],[s,t-1],[s,t+1]]);return[e[0][0],e[0][1]]}selectInDiagonals(){const e=this.getBenefitSums((s,t)=>[[s+1,t+1],[s+1,t-1],[s-1,t-1],[s-1,t+1]]);return[e[0][0],e[0][1]]}selectInHorizontal(){const e=this.getBenefitSums((s,t)=>[[s,t+1],[s,t+2],[s,t-1],[s,t-2]]);return[e[0][0],e[0][1]]}selectInVertical(){const e=this.getBenefitSums((s,t)=>[[s+1,t],[s+2,t],[s-1,t],[s-2,t]]);return[e[0][0],e[0][1]]}selectInRisingDiagonal(){const e=this.getBenefitSums((s,t)=>[[s-1,t+1],[s-2,t+2],[s+1,t-1],[s+2,t-2]]);return[e[0][0],e[0][1]]}selectInFallingDiagonal(){const e=this.getBenefitSums((s,t)=>[[s+1,t+1],[s+2,t+2],[s-1,t-1],[s-2,t-2]]);return[e[0][0],e[0][1]]}selectBlock(e){const s=Date.now();return this.requestId=s,new Promise(t=>{setTimeout(()=>{if(this.requestId!==s){t(null);return}switch(e){case O.AXES:t(this.selectInAxes());break;case O.DIAGONAL:t(this.selectInDiagonals());break;case O.HORIZONTAL:t(this.selectInHorizontal());break;case O.VERTICAL:t(this.selectInVertical());break;case O.FALLING:t(this.selectInFallingDiagonal());break;case O.RISING:t(this.selectInRisingDiagonal());break;default:t(this.selectSingleBlock());break}},1500)})}}function pt(l,e,s){const t=l.slice();return t[50]=e[s],t[52]=s,t}function Et(l,e,s){const t=l.slice();return t[50]=e[s],t[54]=s,t}function Lt(l){let e,s;return e=new ks({props:{rowIndex:l[52],colIndex:l[54],selected:l[0][l[52]][l[54]],selectCandidate:l[3][l[52]][l[54]],hoverColor:l[12],disabled:l[1],hoverCoords:l[6]}}),e.$on("click",l[14]),e.$on("enter",l[17]),e.$on("leave",l[15]),{c(){T(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,n){q(e,t,n),s=!0},p(t,n){const i={};n[0]&1&&(i.selected=t[0][t[52]][t[54]]),n[0]&8&&(i.selectCandidate=t[3][t[52]][t[54]]),n[0]&4096&&(i.hoverColor=t[12]),n[0]&2&&(i.disabled=t[1]),n[0]&64&&(i.hoverCoords=t[6]),e.$set(i)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function St(l){let e,s,t,n=oe({length:l[13]}),i=[];for(let a=0;a<n.length;a+=1)i[a]=Lt(Et(l,n,a));const r=a=>S(i[a],1,1,()=>{i[a]=null});return{c(){e=A("div");for(let a=0;a<i.length;a+=1)i[a].c();s=H(),this.h()},l(a){e=I(a,"DIV",{class:!0});var o=G(e);for(let f=0;f<i.length;f+=1)i[f].l(o);s=X(o),o.forEach(p),this.h()},h(){D(e,"class","flex flex-row gap-1")},m(a,o){K(a,e,o);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);y(e,s),t=!0},p(a,o){if(o[0]&184395){n=oe({length:a[13]});let f;for(f=0;f<n.length;f+=1){const c=Et(a,n,f);i[f]?(i[f].p(c,o),k(i[f],1)):(i[f]=Lt(c),i[f].c(),k(i[f],1),i[f].m(e,s))}for(x(),f=n.length;f<i.length;f+=1)r(f);ee()}},i(a){if(!t){for(let o=0;o<n.length;o+=1)k(i[o]);t=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)S(i[o]);t=!1},d(a){a&&p(e),ye(i,a)}}}function Ws(l){let e,s="This will reset the current board and it's progress. Continue?";return{c(){e=A("p"),e.textContent=s},l(t){e=I(t,"P",{"data-svelte-h":!0}),Be(e)!=="svelte-1jpj5pu"&&(e.textContent=s)},m(t,n){K(t,e,n)},p:he,d(t){t&&p(e)}}}function Zs(l){let e,s="A tie!";return{c(){e=A("p"),e.textContent=s,this.h()},l(t){e=I(t,"P",{class:!0,"data-svelte-h":!0}),Be(e)!=="svelte-16n1wz6"&&(e.textContent=s),this.h()},h(){D(e,"class","text-white")},m(t,n){K(t,e,n)},p:he,d(t){t&&p(e)}}}function js(l){let e,s;return{c(){e=A("p"),s=me("Player 2 won!"),this.h()},l(t){e=I(t,"P",{class:!0});var n=G(e);s=be(n,"Player 2 won!"),n.forEach(p),this.h()},h(){D(e,"class",Ie)},m(t,n){K(t,e,n),y(e,s)},p:he,d(t){t&&p(e)}}}function Us(l){let e,s;return{c(){e=A("p"),s=me("Player 1 won!"),this.h()},l(t){e=I(t,"P",{class:!0});var n=G(e);s=be(n,"Player 1 won!"),n.forEach(p),this.h()},h(){D(e,"class",Ae)},m(t,n){K(t,e,n),y(e,s)},p:he,d(t){t&&p(e)}}}function Ys(l){let e,s="NICE!",t,n,i,r,a,o,f,c,m,w,v;function V(u,g){return u[11][0]>u[11][1]?Us:u[11][0]<u[11][1]?js:Zs}let L=V(l),b=L(l);return o=new Mt({props:{score1:l[11][0],score2:l[11][1],score1Class:"font-bold "+Ae,score2Class:"font-bold "+Ie}}),c=new ue({props:{label:"Play again",icon:At,class:"border border-indigo-300 text-indigo-300 mx-auto mt-10 px-6"}}),c.$on("click",l[19]),w=new ue({props:{label:"Back",class:"text-faded mx-auto mt-4 px-6"}}),w.$on("click",l[21]),{c(){e=A("p"),e.textContent=s,t=H(),n=A("div"),i=A("div"),r=A("div"),b.c(),a=H(),T(o.$$.fragment),f=H(),T(c.$$.fragment),m=H(),T(w.$$.fragment),this.h()},l(u){e=I(u,"P",{"data-svelte-h":!0}),Be(e)!=="svelte-p3lnqo"&&(e.textContent=s),t=X(u),n=I(u,"DIV",{class:!0});var g=G(n);i=I(g,"DIV",{});var E=G(i);r=I(E,"DIV",{class:!0});var P=G(r);b.l(P),a=X(P),z(o.$$.fragment,P),P.forEach(p),f=X(E),z(c.$$.fragment,E),m=X(E),z(w.$$.fragment,E),E.forEach(p),g.forEach(p),this.h()},h(){D(r,"class","text-4xl text-center"),D(n,"class","w-96 h-96 max-w-full max-h-full flex flex-col justify-center items-center")},m(u,g){K(u,e,g),K(u,t,g),K(u,n,g),y(n,i),y(i,r),b.m(r,null),y(r,a),q(o,r,null),y(i,f),q(c,i,null),y(i,m),q(w,i,null),v=!0},p(u,g){L===(L=V(u))&&b?b.p(u,g):(b.d(1),b=L(u),b&&(b.c(),b.m(r,a)));const E={};g[0]&2048&&(E.score1=u[11][0]),g[0]&2048&&(E.score2=u[11][1]),o.$set(E)},i(u){v||(k(o.$$.fragment,u),k(c.$$.fragment,u),k(w.$$.fragment,u),v=!0)},o(u){S(o.$$.fragment,u),S(c.$$.fragment,u),S(w.$$.fragment,u),v=!1},d(u){u&&(p(e),p(t),p(n)),b.d(),F(o),F(c),F(w)}}}function Js(l){let e,s,t,n,i,r,a,o,f,c,m,w,v,V,L,b,u,g,E,P,W;t=new ue({props:{icon:fs,class:"text-purple-400"}}),t.$on("click",l[18]),a=new Fs({props:{class:l[10],color:l[2]}}),f=new Mt({props:{score1:l[11][0],score2:l[11][1],score1Class:"font-bold "+Ae,score2Class:"font-bold "+Ie}}),V=new ue({props:{class:"text-purple-400",icon:At}}),V.$on("click",l[19]);let Z=oe({length:l[13]}),C=[];for(let _=0;_<Z.length;_+=1)C[_]=St(pt(l,Z,_));const Q=_=>S(C[_],1,1,()=>{C[_]=null});return g=new vt({props:{showing:l[4],title:"Reset the game?",okLabel:"Reset",$$slots:{default:[Ws]},$$scope:{ctx:l}}}),g.$on("ok",l[16]),g.$on("dismiss",l[20]),P=new vt({props:{showing:l[5],hideOk:!0,hideCancel:!0,class:"font-bold",$$slots:{default:[Ys]},$$scope:{ctx:l}}}),P.$on("dismiss",l[21]),{c(){e=A("div"),s=A("div"),T(t.$$.fragment),n=H(),i=A("div"),r=A("div"),T(a.$$.fragment),o=H(),T(f.$$.fragment),c=H(),m=A("p"),w=me(l[7]),v=H(),T(V.$$.fragment),L=H(),b=A("div");for(let _=0;_<C.length;_+=1)C[_].c();u=H(),T(g.$$.fragment),E=H(),T(P.$$.fragment),this.h()},l(_){e=I(_,"DIV",{class:!0});var R=G(e);s=I(R,"DIV",{class:!0});var U=G(s);z(t.$$.fragment,U),n=X(U),i=I(U,"DIV",{class:!0});var $=G(i);r=I($,"DIV",{});var J=G(r);z(a.$$.fragment,J),o=X(J),z(f.$$.fragment,J),J.forEach(p),c=X($),m=I($,"P",{class:!0});var ie=G(m);w=be(ie,l[7]),ie.forEach(p),$.forEach(p),v=X(U),z(V.$$.fragment,U),U.forEach(p),L=X(R),b=I(R,"DIV",{class:!0});var j=G(b);for(let te=0;te<C.length;te+=1)C[te].l(j);j.forEach(p),R.forEach(p),u=X(_),z(g.$$.fragment,_),E=X(_),z(P.$$.fragment,_),this.h()},h(){D(m,"class",l[8]),D(i,"class","flex-1 flex flex-row justify-center relative"),D(s,"class","flex flex-row gap-2 pb-2 pt-3 px-2 items-start"),D(b,"class","flex-1 flex flex-col justify-center w-full max-w-[600px] mx-auto gap-1 px-3"),D(e,"class",l[9])},m(_,R){K(_,e,R),y(e,s),q(t,s,null),y(s,n),y(s,i),y(i,r),q(a,r,null),y(r,o),q(f,r,null),y(i,c),y(i,m),y(m,w),y(s,v),q(V,s,null),y(e,L),y(e,b);for(let U=0;U<C.length;U+=1)C[U]&&C[U].m(b,null);K(_,u,R),q(g,_,R),K(_,E,R),q(P,_,R),W=!0},p(_,R){const U={};R[0]&1024&&(U.class=_[10]),R[0]&4&&(U.color=_[2]),a.$set(U);const $={};if(R[0]&2048&&($.score1=_[11][0]),R[0]&2048&&($.score2=_[11][1]),f.$set($),(!W||R[0]&128)&&Bt(w,_[7]),(!W||R[0]&256)&&D(m,"class",_[8]),R[0]&192587){Z=oe({length:_[13]});let j;for(j=0;j<Z.length;j+=1){const te=pt(_,Z,j);C[j]?(C[j].p(te,R),k(C[j],1)):(C[j]=St(te),C[j].c(),k(C[j],1),C[j].m(b,null))}for(x(),j=Z.length;j<C.length;j+=1)Q(j);ee()}(!W||R[0]&512)&&D(e,"class",_[9]);const J={};R[0]&16&&(J.showing=_[4]),R[1]&16777216&&(J.$$scope={dirty:R,ctx:_}),g.$set(J);const ie={};R[0]&32&&(ie.showing=_[5]),R[0]&2048|R[1]&16777216&&(ie.$$scope={dirty:R,ctx:_}),P.$set(ie)},i(_){if(!W){k(t.$$.fragment,_),k(a.$$.fragment,_),k(f.$$.fragment,_),k(V.$$.fragment,_);for(let R=0;R<Z.length;R+=1)k(C[R]);k(g.$$.fragment,_),k(P.$$.fragment,_),W=!0}},o(_){S(t.$$.fragment,_),S(a.$$.fragment,_),S(f.$$.fragment,_),S(V.$$.fragment,_),C=C.filter(Boolean);for(let R=0;R<C.length;R+=1)S(C[R]);S(g.$$.fragment,_),S(P.$$.fragment,_),W=!1},d(_){_&&(p(e),p(u),p(E)),F(t),F(a),F(f),F(V),ye(C,_),F(g,_),F(P,_)}}}const Ae="text-blue-300",Ie="text-pink-300";function Qs(l,e,s){let t,n,i,r,a,o,f,c,m,w,v,V,L,b;re(l,gs,d=>s(27,v=d)),re(l,ke,d=>s(31,V=d)),re(l,Ee,d=>s(32,L=d)),re(l,pe,d=>s(33,b=d));let u=[],g=[],E=0,P=!1,W=!1,Z=!1,C=!1,Q=null,_=null,R=!1,U=null;const $=parseInt(v.url.searchParams.get("s")||String(at)),J=us.indexOf($)>=0?$:at,ie=(d,h,B)=>{if(!(!u[d]||u[d][h]!==!1))return s(0,u[d][h]=B,u),[d,h]},j=(d,h)=>[[d,h],[d-1,h],[d+1,h],[d,h-1],[d,h+1]],te=(d,h)=>[[d,h],[d-1,h-1],[d-1,h+1],[d+1,h-1],[d+1,h+1]],Xe=(d,h)=>[[d,h],[d+1,h-1],[d+2,h-2],[d-1,h+1],[d-2,h+2]],Ke=(d,h)=>[[d,h],[d-1,h-1],[d-2,h-2],[d+1,h+1],[d+2,h+2]],We=(d,h)=>[[d,h],[d,h-1],[d,h-2],[d,h+1],[d,h+2]],Ze=(d,h)=>[[d,h],[d-1,h],[d-2,h],[d+1,h],[d+2,h]],Gt=(d,h,B)=>{const M=[];let N=[];switch(V){case O.AXES:N=j(d,h);break;case O.DIAGONAL:N=te(d,h);break;case O.RISING:N=Xe(d,h);break;case O.FALLING:N=Ke(d,h);break;case O.HORIZONTAL:N=We(d,h);break;case O.VERTICAL:N=Ze(d,h);break;default:N=[[d,h]];break}for(let Y=0;Y<N.length;Y++)M.push(ie(N[Y][0],N[Y][1],B));return M},Pt=(d,h)=>{const B=[];for(let M=0;M<d.length;M++){if(!d[M])continue;const[N,Y]=d[M],$e=Y+1,Zt=Y+2,xe=Y-1,jt=Y-2,et=N+1,tt=N+2,st=N-1,lt=N-2;u[N][Zt]===h&&u[N][$e]!==!1&&B.push([N,$e]),u[N][jt]===h&&u[N][xe]!==!1&&B.push([N,xe]),u[tt]&&u[tt][Y]===h&&u[et][Y]!==!1&&B.push([et,Y]),u[lt]&&u[lt][Y]===h&&u[st][Y]!==!1&&B.push([st,Y])}return B},Tt=(d,h)=>{const B=Pt(d,h);for(let M=0;M<B.length;M++)s(0,u[B[M][0]][B[M][1]]=h,u)},je=async(d,h)=>{const B=t?"color1":"color2";if(Tt(Gt(d,h,B),B),!Object.values(u).some(M=>M.some(N=>!N))){s(23,C=!0),setTimeout(Wt,500);return}s(22,E++,E),await yt(),t&&(ge(ke,V=b,V),ge(pe,b=L,b),ge(Ee,L=Me(),L)),f&&!t&&zt()},zt=async()=>{s(1,R=!0),_||(_=new Ks(u));const d=await _.selectBlock(V);s(1,R=!1),d&&je(d[0],d[1])},qt=async({detail:{rowIndex:d,colIndex:h}})=>{if(Hs.is.webMobile&&(!Q||Q[0]!==d||Q[1]!==h)){Q=[d,h];return}Z=!0,je(d,h)},Ue=()=>{const d=[];for(let h=0;h<J;h++){d[h]=[];for(let B=0;B<J;B++)d[h][B]=!1}s(3,g=d),s(6,U=null),Q=null},Ye=()=>{const d=[];for(let h=0;h<J;h++){d[h]=[];for(let B=0;B<J;B++)d[h][B]=!1}s(0,u=d),Ue()},Ft=d=>{let h=0,B=0;for(let M=0;M<d.length;M++)for(let N=0;N<d[M].length;N++)d[M][N]==="color1"?h+=Re(d,M,N,"color1"):d[M][N]==="color2"&&(B+=Re(d,M,N,"color2"));return[h,B]},ve=()=>{Ye(),s(22,E=0),ge(ke,V=O.SINGLE,V),ge(pe,b=Me(),b),ge(Ee,L=Me(),L),Je(),Z=!1,s(23,C=!1),s(1,R=!1),_&&(_.cancelActiveActions(),_=null)},Ht=({detail:{rowIndex:d,colIndex:h}})=>{let B=[];switch(V){case O.AXES:B=j(d,h);break;case O.DIAGONAL:B=te(d,h);break;case O.RISING:B=Xe(d,h);break;case O.FALLING:B=Ke(d,h);break;case O.HORIZONTAL:B=We(d,h);break;case O.VERTICAL:B=Ze(d,h);break}for(let M=0;M<B.length;M++)g[B[M][0]]!==void 0&&g[B[M][0]][B[M][1]]!==void 0&&s(3,g[B[M][0]][B[M][1]]=n,g);s(6,U=[d,h])},Xt=()=>{Z&&!C&&!confirm("Do you want to leave this page now?")||os("./")},Kt=()=>{if(W){Qe(),setTimeout(ve,250);return}if(!Z||C){ve();return}s(4,P=!0)},Je=()=>{s(4,P=!1)},Wt=()=>{s(5,W=!0)},Qe=()=>{s(5,W=!1)};return Ye(),Jt(ve),l.$$.update=()=>{l.$$.dirty[0]&4194304&&s(25,t=ds(E)),l.$$.dirty[0]&33554432&&s(12,n=t?"color1":"color2"),l.$$.dirty[0]&33554432&&s(2,i=t?Ae:Ie),l.$$.dirty[0]&1&&s(11,r=Ft(u)),l.$$.dirty[0]&8388608&&s(10,a="pb-2"+(C?" invisible":"")),l.$$.dirty[0]&134217728&&s(26,o=v.url.searchParams.get("m")),l.$$.dirty[0]&67108864&&s(24,f=typeof o=="string"&&o==="0"),l.$$.dirty[0]&2&&s(9,c="h-device flex flex-col"+(R?" cursor-wait":"")),l.$$.dirty[0]&16777220&&s(8,m="absolute -bottom-4 w-full text-center"+(f?" text-faded":" "+i)),l.$$.dirty[0]&50331648&&s(7,w=t?"Player 1":f?"Computer...":"Player 2")},[u,R,i,g,P,W,U,w,m,c,a,r,n,J,qt,Ue,ve,Ht,Xt,Kt,Je,Qe,E,C,f,t,o,v]}class ol extends le{constructor(e){super(),ne(this,e,Qs,Js,se,{},null,[-1,-1])}}export{ol as component};
